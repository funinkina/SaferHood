<body>
  {% extends "nav.html" %} {% block content %}
  <div class="mx-8 my-5 flex justify-between">
    <h2 class="text-4xl font-light text-black/50">
      Live Data from News Articles
    </h2>
  </div>
  <table id="table">
    <!-- Table header -->
    <thead>
      <tr>
        <th>Type</th>
        <th>Criminal Name</th>
        <th>Reported Date</th>
        <th>Location</th>
      </tr>
    </thead>
    <!-- Table body for crime data -->
    <tbody id="crime-body">
      <!-- Crime data will be dynamically added here -->
    </tbody>
  </table>

</body>
<style>
  h1 {
    color: #2b2b2b;
    /* Dark text color */
    word-wrap: break-word;
    margin-top: 20px;
    /* Add some top margin */
    text-align: center;
    /* Center align heading */
    font-size: 36px;
    font-family: Gotham;
    font-weight: 300;
  }

  table {
    border-collapse: collapse;
    width: 100%;
    /* Reduce table width */
    max-width: 800px;
    /* Limit maximum width */
    background-color: #ffffff;
    /* White background for table */
    border-radius: 8px;
    /* Add some border radius */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    /* Add a subtle shadow */
    margin: 100px auto;
    /* Center table horizontally */
  }

  th,
  td {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 12px;
    /* Increase cell padding for better spacing */
  }

  th {
    background-color: #5C8DD6;
    font-weight: bold;
    color: white;
    /* Make header text bold */
  }

  tr:nth-child(even) {
    background-color: #f9f9f9;
    /* Alternate row background color */
  }

  tr:hover {
    background-color: #f0f0f0;
    /* Hover row background color */
  }

  .skeleton {
    background-color: #f0f0f0;
    height: 40px;
    background-image:
      linear-gradient(90deg,
        rgba(#ae5959, 0),
        rgba(#b23333, 0.5),
        rgba(#0e0202, 0));
    background-size: 40px 100%;
    background-repeat: no-repeat;
    background-position: left -40px top 0;
    animation: shine 1s ease infinite;
  }

  @keyframes shine {
    to {
      background-position: right -40px top 0;
    }
  }
</style>

<script>
  fetch('{{ news_file }}')
    .then(response => response.json())
    .then(data => {
      var crimeBody = document.getElementById('crime-body');
      data.forEach((crime, index) => {
        setTimeout(() => {
          var row = document.createElement('tr');
          row.innerHTML = `
            <td>${crime.Type}</td>
            <td>${crime.Criminal_name}</td>
            <td>${crime.Reported_date} ${crime.Reported_time}</td>
            <td>${crime.Location}</td>
          `;
          crimeBody.appendChild(row);
        }, Math.random() * 2000);
      });

      // Add a row with skeleton loading animation
      var skeletonRow = document.createElement('tr');
      skeletonRow.innerHTML = `
        <td class="skeleton">Loading more...</td>
        <td class="skeleton"></td>
        <td class="skeleton"></td>
        <td class="skeleton"></td>
      `;
      crimeBody.appendChild(skeletonRow);
    })
    .catch(error => console.error('Error:', error));
</script>
{% endblock %}